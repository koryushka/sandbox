<div ng-include="'app/components/navbar/navbar.html'")></div>
<div class = "container">
  <h1>Деятельность</h1>
  <div ng-repeat="post in posts">
    <md-card id = "anchor{{$index}}">
     <md-card-content ng-show='editing && currentUser'>
       <h1>Update post</h1>
       <form ng-submit="editing = false">
         <div layout-gt-sm="row">
           <md-input-container class="md-block" flex-gt-sm>
             <label>Title</label>
             <input ng-model="post.title">
           </md-input-container>
         </div>
         <md-input-container class="md-block">
           <label>Type your post here...</label>
           <textarea ui-tinymce="tinymceOptions" ng-model="post.body"  rows="5" md-select-on-focus></textarea>
         </md-input-container>
         <md-button class = "md-raised md-primary" ng-click = 'updatePost(post)'type = 'submit'>Update post</md-button>
         <md-button class = "md-raised" ng-click = 'editing = false;showEditForm(true);'>Cancel</md-button>
         <!-- <button class="btn" ng-click = 'updatePost(post);' type="submit">Save</button> -->
       </form>
     </md-card-content>
     <md-card-content ng-hide='editing'>
       <h2>{{post.title}}</h2>
       <!-- <p ng-bind-html = "post.body">{{post.body}}</p> -->
       <p ng-bind-html = "codeToHtml(post.body)"></p>

     </md-card-content>
     <md-card-footer ng-hide='editing'>
       created at {{post.created_at}}
       <span ng-show = 'currentUser'>
         <md-button class="md-warn" ng-click="removePost($index);">Remove post</md-button>
         <md-button class="md-primary" ng-click="editing = true;showEditForm(false);">Edit post</md-button>
       </span>
     </md-card-footer>
    </md-card>
  </div>

  <md-content ng-show='showForm && currentUser' layout-padding>
    <div>
      <h1>Create post</h1>
      <form ng-submit="addPost()" name="postForm">
        <div layout-gt-sm="row">
          <md-input-container class="md-block" flex-gt-sm>
            <label>Title</label>
            <input ng-model="Item.title">
          </md-input-container>
        </div>
        <md-input-container class="md-block">
          <label>Type your post here..!!.</label>
          <textarea ui-tinymce="tinymceOptions" ng-model="Item.body"  rows="5" md-select-on-focus></textarea>
        </md-input-container>
        <!-- <input type='submit' value = 'Add post'> -->
        <md-button class = "md-raised md-primary" ng-click="addPost(Item, 'activity');">Add post</md-button>
      </form>
    </div>
  </md-content>


</div>
